{"version":3,"file":"QuestSidebar-D5mCGK6w.js","sources":["../../../../src/components/synergy/QuestSidebar.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { ElementType, GuardianClass, Expansion } from '../../types';\r\nimport { manifestService } from '../../services/bungie/manifest.service';\r\nimport { getBungieUrl } from '../../utils/url-helper';\r\nimport { useManifestStore } from '../../store';\r\nimport TitanLogo from '../../assets/logos/titan.png';\r\nimport HunterLogo from '../../assets/logos/hunter.png';\r\nimport WarlockLogo from '../../assets/logos/warlock.png';\r\nimport './QuestSidebar.css';\r\n\r\ninterface QuestSidebarProps {\r\n    selectedElements: ElementType[];\r\n    onToggleElement: (element: ElementType) => void;\r\n    selectedClass: GuardianClass | 'all';\r\n    onSelectClass: (guardianClass: GuardianClass | 'all') => void;\r\n    selectedExpansions: Expansion[];\r\n    onToggleExpansion: (expansion: Expansion) => void;\r\n}\r\n\r\nexport function QuestSidebar({\r\n    selectedElements = [],\r\n    onToggleElement,\r\n    selectedClass = 'all',\r\n    onSelectClass,\r\n    selectedExpansions = [],\r\n    onToggleExpansion\r\n}: QuestSidebarProps) {\r\n    const [elementIcons, setElementIcons] = useState<Record<string, string>>({});\r\n    const [expansionIcons, setExpansionIcons] = useState<Record<string, string>>({});\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const { isLoaded } = useManifestStore();\r\n\r\n    // Define the order of items. 'all' is the top (Crown/Quest icon equivalent)\r\n    const elementItems: (ElementType | 'all')[] = [\r\n        'all',\r\n        ElementType.Solar,\r\n        ElementType.Void,\r\n        ElementType.Arc,\r\n        ElementType.Stasis,\r\n        ElementType.Strand,\r\n        ElementType.Prismatic\r\n    ];\r\n\r\n    const classItems: (GuardianClass)[] = [\r\n        GuardianClass.Titan,\r\n        GuardianClass.Hunter,\r\n        GuardianClass.Warlock\r\n    ];\r\n\r\n    const expansionItems: Expansion[] = [\r\n        Expansion.BaseGame,\r\n        Expansion.Forsaken,\r\n        Expansion.Shadowkeep,\r\n        Expansion.BeyondLight,\r\n        Expansion.Anniversary30th,\r\n        Expansion.WitchQueen,\r\n        Expansion.Lightfall,\r\n        Expansion.FinalShape,\r\n        Expansion.EdgeOfFate,\r\n        Expansion.Renegade\r\n    ];\r\n\r\n    // Local state for class icons fetched from manifest\r\n    const [classIcons, setClassIcons] = useState<Record<GuardianClass, string>>({\r\n        [GuardianClass.Titan]: TitanLogo,\r\n        [GuardianClass.Hunter]: HunterLogo,\r\n        [GuardianClass.Warlock]: WarlockLogo\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!isLoaded) return;\r\n\r\n        // 1. Load Element Icons\r\n        const kineticIcon = manifestService.getDamageTypeIcon('kinetic');\r\n        const loadedIcons: Record<string, string> = {\r\n            'all': kineticIcon || '/common/destiny2_content/icons/3385a924fd3ccb92c343ade19f19a370.png'  // Use kinetic damage type icon\r\n        };\r\n        elementItems.forEach(type => {\r\n            if (type !== 'all') {\r\n                // Special handling for Prismatic - use class-specific subclass icon\r\n                if (type === ElementType.Prismatic) {\r\n                    // Get the same prismatic subclass icon as shown in SubclassScreen\r\n                    const allSubclasses = manifestService.getAllSubclassComponents();\r\n                    const classTypeMap: Record<GuardianClass, number> = {\r\n                        [GuardianClass.Titan]: 0,\r\n                        [GuardianClass.Hunter]: 1,\r\n                        [GuardianClass.Warlock]: 2\r\n                    };\r\n\r\n                    // Only use class-specific icon if a specific class is selected\r\n                    if (selectedClass !== 'all' && classTypeMap[selectedClass] !== undefined) {\r\n                        const targetClassType = classTypeMap[selectedClass];\r\n                        const prismaticSubclass = allSubclasses.find(sub =>\r\n                            sub.classType === targetClassType &&\r\n                            sub.name.toLowerCase().includes('prismatic')\r\n                        );\r\n\r\n                        if (prismaticSubclass?.icon) {\r\n                            loadedIcons[type] = prismaticSubclass.icon;\r\n                        }\r\n                    }\r\n\r\n                    // If no icon found yet (no class selected or not found), use any prismatic as fallback\r\n                    if (!loadedIcons[type]) {\r\n                        const anyPrismatic = allSubclasses.find(sub => sub.name.toLowerCase().includes('prismatic'));\r\n                        if (anyPrismatic?.icon) {\r\n                            loadedIcons[type] = anyPrismatic.icon;\r\n                        }\r\n                    }\r\n                } else {\r\n                    const icon = manifestService.getDamageTypeIcon(type);\r\n                    if (icon) loadedIcons[type] = icon;\r\n                }\r\n            }\r\n        });\r\n        setElementIcons(loadedIcons);\r\n\r\n\r\n        // 2. Load Class Icons (Presentation Nodes)\r\n        const newClassIcons = { ...classIcons };\r\n\r\n        const fetchNodeIcon = (name: string, fallback: string) => {\r\n            const node = manifestService.searchPresentationNodeByName(name, true);\r\n            return node?.icon || fallback;\r\n        };\r\n\r\n        const titanIcon = fetchNodeIcon(\"Titan\", TitanLogo);\r\n        const hunterIcon = fetchNodeIcon(\"Hunter\", HunterLogo);\r\n        const warlockIcon = fetchNodeIcon(\"Warlock\", WarlockLogo);\r\n\r\n        if (titanIcon !== TitanLogo) newClassIcons[GuardianClass.Titan] = titanIcon;\r\n        if (hunterIcon !== HunterLogo) newClassIcons[GuardianClass.Hunter] = hunterIcon;\r\n        if (warlockIcon !== WarlockLogo) newClassIcons[GuardianClass.Warlock] = warlockIcon;\r\n\r\n        setClassIcons(newClassIcons);\r\n\r\n\r\n        // 3. Load Expansion Icons\r\n        const loadedExpIcons: Record<string, string> = {};\r\n\r\n        // Map Expansion -> Search query for Presentation Node or Record\r\n        const expansionSearchMap: Record<string, { type: 'Node' | 'Record' | 'Item', query: string, exact?: boolean }> = {\r\n            [Expansion.BaseGame]: { type: 'Node', query: 'The Red War' },\r\n            [Expansion.Forsaken]: { type: 'Record', query: 'Destinations' },\r\n            [Expansion.Shadowkeep]: { type: 'Node', query: 'Shadowkeep' },\r\n            [Expansion.BeyondLight]: { type: 'Node', query: 'Beyond Light' },\r\n            [Expansion.Anniversary30th]: { type: 'Node', query: '30th Anniversary' },\r\n            [Expansion.WitchQueen]: { type: 'Node', query: 'The Witch Queen' },\r\n            [Expansion.Lightfall]: { type: 'Node', query: 'Lightfall' },\r\n            [Expansion.FinalShape]: { type: 'Item', query: 'Legacy: The Final Shape', exact: false },\r\n            [Expansion.Renegade]: { type: 'Item', query: 'Renegade', exact: false },\r\n            [Expansion.EdgeOfFate]: { type: 'Item', query: 'Edge of Fate', exact: false }\r\n        };\r\n\r\n        // Fallback: Hardcoded Hashes if search fails \r\n        const expansionHarcdoded: Record<string, { hash: number, type: 'Node' | 'Record' }> = {\r\n            [Expansion.Forsaken]: { hash: 3076162311, type: 'Record' },\r\n            [Expansion.Anniversary30th]: { hash: 2404612039, type: 'Record' },\r\n        };\r\n\r\n        // Priority: Use rootViewIcon paths for specific DLCs\r\n        const expansionRootViewIcons: Record<string, string> = {\r\n            [Expansion.Renegade]: '/common/destiny2_content/icons/843b1dfa55b92ccd8f8c6e9d9a0feec8.png',\r\n            [Expansion.EdgeOfFate]: '/common/destiny2_content/icons/1c4e4d183392430e23dfae3f77569c86.png',\r\n            [Expansion.FinalShape]: '/common/destiny2_content/icons/22d097b865f64884117ce6658e14a028.png',\r\n            [Expansion.BaseGame]: '/common/destiny2_content/icons/9a4e146af8bf678a3fd1fb55d3424e36.png',\r\n        };\r\n\r\n        expansionItems.forEach(exp => {\r\n            let iconUrl: string | undefined;\r\n\r\n            // 0. Check for direct rootViewIcon path first (highest priority)\r\n            if (expansionRootViewIcons[exp]) {\r\n                iconUrl = expansionRootViewIcons[exp];\r\n                loadedExpIcons[exp] = iconUrl;\r\n                return; // Skip other lookups\r\n            }\r\n\r\n            const searchDef = expansionSearchMap[exp];\r\n\r\n            // 1. Try Search Strategy\r\n            if (searchDef) {\r\n                const exact = searchDef.exact ?? false;\r\n\r\n                if (searchDef.type === 'Node') {\r\n                    const node = manifestService.searchPresentationNodeByName(searchDef.query, exact);\r\n                    if (node?.icon) iconUrl = node.icon;\r\n                } else if (searchDef.type === 'Record') {\r\n                    const record = manifestService.searchRecordByName(searchDef.query, exact);\r\n                    if (record?.icon) iconUrl = record.icon;\r\n                } else if (searchDef.type === 'Item') {\r\n                    const item = manifestService.searchItemByName(searchDef.query, exact);\r\n                    if (item?.displayProperties?.icon) iconUrl = item.displayProperties.icon;\r\n                }\r\n            }\r\n\r\n            // 2. Fallback to Hardcoded\r\n            if (!iconUrl && expansionHarcdoded[exp]) {\r\n                const def = expansionHarcdoded[exp];\r\n                if (def.type === 'Node') {\r\n                    const node = manifestService.getPresentationNode(def.hash);\r\n                    if (node?.icon) iconUrl = node.icon;\r\n                } else {\r\n                    const record = manifestService.getRecord(def.hash);\r\n                    if (record?.icon) iconUrl = record.icon;\r\n                }\r\n            }\r\n\r\n            if (iconUrl) loadedExpIcons[exp] = iconUrl;\r\n        });\r\n\r\n        setExpansionIcons(loadedExpIcons);\r\n\r\n    }, [isLoaded, selectedClass]); // Re-run when class changes to update prismatic icon\r\n\r\n    const getClassLabel = (cls: GuardianClass) => {\r\n        switch (cls) {\r\n            case GuardianClass.Titan: return 'Titan';\r\n            case GuardianClass.Hunter: return 'Hunter';\r\n            case GuardianClass.Warlock: return 'Warlock';\r\n            default: return '';\r\n        }\r\n    };\r\n\r\n    const getClassIcon = (cls: GuardianClass) => {\r\n        return classIcons[cls] || '';\r\n    };\r\n\r\n    return (\r\n        <nav className=\"quest-sidebar\">\r\n            {/* Search Bar */}\r\n            <div className=\"quest-sidebar__search-container\">\r\n                <input\r\n                    id=\"quest-sidebar-search\"\r\n                    name=\"quest-sidebar-search\"\r\n                    type=\"text\"\r\n                    placeholder=\"Search synergies...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"quest-sidebar__search\"\r\n                />\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                    <circle cx=\"11\" cy=\"11\" r=\"8\" />\r\n                    <line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\r\n                </svg>\r\n            </div>\r\n\r\n            <div className=\"quest-sidebar__filters-row\">\r\n                {/* Class Filters (Left Column) */}\r\n                <div className=\"quest-sidebar__group\">\r\n                    <span className=\"quest-sidebar__label\">Class</span>\r\n                    <div className=\"quest-sidebar__track quest-sidebar__track--classes\">\r\n                        {classItems.map((cls) => (\r\n                            <button\r\n                                key={cls}\r\n                                className={`quest-sidebar__item ${selectedClass === cls ? 'quest-sidebar__item--active' : ''}`}\r\n                                onClick={() => onSelectClass(selectedClass === cls ? 'all' : cls)}\r\n                                title={getClassLabel(cls)}\r\n                            >\r\n                                <img src={getClassIcon(cls).startsWith('/') ? getBungieUrl(getClassIcon(cls)) : getClassIcon(cls)} alt={getClassLabel(cls)} className=\"quest-sidebar__icon\" style={{ opacity: selectedClass === cls ? 1 : 0.5 }} />\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Expansion Filters (Middle Column - New) */}\r\n                <div className=\"quest-sidebar__group\">\r\n                    <span className=\"quest-sidebar__label\">DLC</span>\r\n                    <div className=\"quest-sidebar__track quest-sidebar__track--expansions\">\r\n                        {expansionItems.map((exp) => {\r\n                            const isBaseGame = exp === Expansion.BaseGame;\r\n                            const handleExpansionClick = () => {\r\n                                if (isBaseGame) {\r\n                                    // Toggle all DLCs on or off\r\n                                    const nonBaseExpansions = expansionItems.filter(e => e !== Expansion.BaseGame);\r\n                                    const allSelected = nonBaseExpansions.every(e => selectedExpansions.includes(e));\r\n\r\n                                    if (allSelected) {\r\n                                        // Deselect all except base game\r\n                                        nonBaseExpansions.forEach(e => onToggleExpansion(e));\r\n                                    } else {\r\n                                        // Select all\r\n                                        nonBaseExpansions.forEach(e => {\r\n                                            if (!selectedExpansions.includes(e)) {\r\n                                                onToggleExpansion(e);\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                } else {\r\n                                    onToggleExpansion(exp);\r\n                                }\r\n                            };\r\n\r\n                            return (\r\n                                <button\r\n                                    key={exp}\r\n                                    className={`quest-sidebar__item ${selectedExpansions.includes(exp) ? 'quest-sidebar__item--active' : ''}`}\r\n                                    onClick={handleExpansionClick}\r\n                                    title={isBaseGame ? 'Toggle All DLCs' : exp.replace('-', ' ').toUpperCase()}\r\n                                >\r\n                                    {/* Fallback text if icon missing, or just a generic icon */}\r\n                                    {expansionIcons[exp] ? (\r\n                                        <img src={getBungieUrl(expansionIcons[exp])} alt={exp} className=\"quest-sidebar__icon\" style={{ borderRadius: '4px' }} />\r\n                                    ) : (\r\n                                        <span style={{ fontSize: '10px', color: 'white' }}>{exp.substring(0, 2).toUpperCase()}</span>\r\n                                    )}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Element Filters (Right Column) */}\r\n                <div className=\"quest-sidebar__group\">\r\n                    <span className=\"quest-sidebar__label\">Filter</span>\r\n                    <div className=\"quest-sidebar__track quest-sidebar__track--elements\">\r\n                        {elementItems.map((item) => {\r\n                            const isAll = item === 'all';\r\n                            const actualElements = elementItems.filter(i => i !== 'all') as ElementType[];\r\n                            const allSelected = actualElements.every(el => selectedElements.includes(el));\r\n                            const isActive = isAll ? allSelected : selectedElements.includes(item as ElementType);\r\n\r\n                            const handleClick = () => {\r\n                                if (isAll) {\r\n                                    if (allSelected) {\r\n                                        // Cannot deselect all - do nothing (keep at least one selected)\r\n                                        return;\r\n                                    } else {\r\n                                        // Select all\r\n                                        actualElements.forEach(el => {\r\n                                            if (!selectedElements.includes(el)) onToggleElement(el);\r\n                                        });\r\n                                    }\r\n                                } else {\r\n                                    // Prevent deselecting if this is the last selected element\r\n                                    if (selectedElements.includes(item as ElementType) && selectedElements.length === 1) {\r\n                                        return; // Keep at least one selected\r\n                                    }\r\n                                    onToggleElement(item as ElementType);\r\n                                }\r\n                            };\r\n\r\n                            return (\r\n                                <button\r\n                                    key={item}\r\n                                    className={`quest-sidebar__item ${isActive ? 'quest-sidebar__item--active' : ''}`}\r\n                                    onClick={handleClick}\r\n                                    title={item.toUpperCase()}\r\n                                >\r\n                                    {elementIcons[item] && (\r\n                                        <img\r\n                                            src={getBungieUrl(elementIcons[item])}\r\n                                            alt={item}\r\n                                            className=\"quest-sidebar__icon\"\r\n                                            style={{ opacity: isActive ? 1 : 0.5 }}\r\n                                        />\r\n                                    )}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n"],"names":["QuestSidebar","selectedElements","onToggleElement","selectedClass","onSelectClass","selectedExpansions","onToggleExpansion","elementIcons","setElementIcons","useState","expansionIcons","setExpansionIcons","searchQuery","setSearchQuery","isLoaded","useManifestStore","elementItems","ElementType","classItems","GuardianClass","expansionItems","Expansion","classIcons","setClassIcons","TitanLogo","HunterLogo","WarlockLogo","useEffect","loadedIcons","manifestService","type","allSubclasses","classTypeMap","targetClassType","prismaticSubclass","sub","anyPrismatic","icon","newClassIcons","fetchNodeIcon","name","fallback","titanIcon","hunterIcon","warlockIcon","loadedExpIcons","expansionSearchMap","expansionHarcdoded","expansionRootViewIcons","exp","iconUrl","searchDef","exact","node","record","item","def","getClassLabel","cls","getClassIcon","jsxs","jsx","getBungieUrl","isBaseGame","handleExpansionClick","nonBaseExpansions","e","isAll","actualElements","i","allSelected","el","isActive","handleClick"],"mappings":"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"}