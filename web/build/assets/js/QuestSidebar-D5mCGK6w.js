import{j as a}from"./markdown-DyKRzreE.js";import{r as g}from"./react-vendor-BrsWO7iZ.js";import{a as V,G as c,m,E as p,I as s,g as j}from"./galaxy-CADwz3wb.js";import{W as v,H as L,T as B}from"./index-dpLgvviA.js";function Y({selectedElements:b=[],onToggleElement:C,selectedClass:y="all",onSelectClass:G,selectedExpansions:q=[],onToggleExpansion:N}){const[T,P]=g.useState({}),[W,Q]=g.useState({}),[D,U]=g.useState(""),{isLoaded:R}=V(),k=["all",p.Solar,p.Void,p.Arc,p.Stasis,p.Strand,p.Prismatic],M=[c.Titan,c.Hunter,c.Warlock],x=[s.BaseGame,s.Forsaken,s.Shadowkeep,s.BeyondLight,s.Anniversary30th,s.WitchQueen,s.Lightfall,s.FinalShape,s.EdgeOfFate,s.Renegade],[w,O]=g.useState({[c.Titan]:B,[c.Hunter]:L,[c.Warlock]:v});g.useEffect(()=>{if(!R)return;const d={all:m.getDamageTypeIcon("kinetic")||"/common/destiny2_content/icons/3385a924fd3ccb92c343ade19f19a370.png"};k.forEach(i=>{if(i!=="all")if(i===p.Prismatic){const n=m.getAllSubclassComponents(),r={[c.Titan]:0,[c.Hunter]:1,[c.Warlock]:2};if(y!=="all"&&r[y]!==void 0){const l=r[y],t=n.find(A=>A.classType===l&&A.name.toLowerCase().includes("prismatic"));t?.icon&&(d[i]=t.icon)}if(!d[i]){const l=n.find(t=>t.name.toLowerCase().includes("prismatic"));l?.icon&&(d[i]=l.icon)}}else{const n=m.getDamageTypeIcon(i);n&&(d[i]=n)}}),P(d);const h={...w},u=(i,n)=>m.searchPresentationNodeByName(i,!0)?.icon||n,_=u("Titan",B),o=u("Hunter",L),f=u("Warlock",v);_!==B&&(h[c.Titan]=_),o!==L&&(h[c.Hunter]=o),f!==v&&(h[c.Warlock]=f),O(h);const S={},$={[s.BaseGame]:{type:"Node",query:"The Red War"},[s.Forsaken]:{type:"Record",query:"Destinations"},[s.Shadowkeep]:{type:"Node",query:"Shadowkeep"},[s.BeyondLight]:{type:"Node",query:"Beyond Light"},[s.Anniversary30th]:{type:"Node",query:"30th Anniversary"},[s.WitchQueen]:{type:"Node",query:"The Witch Queen"},[s.Lightfall]:{type:"Node",query:"Lightfall"},[s.FinalShape]:{type:"Item",query:"Legacy: The Final Shape",exact:!1},[s.Renegade]:{type:"Item",query:"Renegade",exact:!1},[s.EdgeOfFate]:{type:"Item",query:"Edge of Fate",exact:!1}},F={[s.Forsaken]:{hash:3076162311,type:"Record"},[s.Anniversary30th]:{hash:2404612039,type:"Record"}},H={[s.Renegade]:"/common/destiny2_content/icons/843b1dfa55b92ccd8f8c6e9d9a0feec8.png",[s.EdgeOfFate]:"/common/destiny2_content/icons/1c4e4d183392430e23dfae3f77569c86.png",[s.FinalShape]:"/common/destiny2_content/icons/22d097b865f64884117ce6658e14a028.png",[s.BaseGame]:"/common/destiny2_content/icons/9a4e146af8bf678a3fd1fb55d3424e36.png"};x.forEach(i=>{let n;if(H[i]){n=H[i],S[i]=n;return}const r=$[i];if(r){const l=r.exact??!1;if(r.type==="Node"){const t=m.searchPresentationNodeByName(r.query,l);t?.icon&&(n=t.icon)}else if(r.type==="Record"){const t=m.searchRecordByName(r.query,l);t?.icon&&(n=t.icon)}else if(r.type==="Item"){const t=m.searchItemByName(r.query,l);t?.displayProperties?.icon&&(n=t.displayProperties.icon)}}if(!n&&F[i]){const l=F[i];if(l.type==="Node"){const t=m.getPresentationNode(l.hash);t?.icon&&(n=t.icon)}else{const t=m.getRecord(l.hash);t?.icon&&(n=t.icon)}}n&&(S[i]=n)}),Q(S)},[R,y]);const E=e=>{switch(e){case c.Titan:return"Titan";case c.Hunter:return"Hunter";case c.Warlock:return"Warlock";default:return""}},I=e=>w[e]||"";return a.jsxs("nav",{className:"quest-sidebar",children:[a.jsxs("div",{className:"quest-sidebar__search-container",children:[a.jsx("input",{id:"quest-sidebar-search",name:"quest-sidebar-search",type:"text",placeholder:"Search synergies...",value:D,onChange:e=>U(e.target.value),className:"quest-sidebar__search"}),a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})]}),a.jsxs("div",{className:"quest-sidebar__filters-row",children:[a.jsxs("div",{className:"quest-sidebar__group",children:[a.jsx("span",{className:"quest-sidebar__label",children:"Class"}),a.jsx("div",{className:"quest-sidebar__track quest-sidebar__track--classes",children:M.map(e=>a.jsx("button",{className:`quest-sidebar__item ${y===e?"quest-sidebar__item--active":""}`,onClick:()=>G(y===e?"all":e),title:E(e),children:a.jsx("img",{src:I(e).startsWith("/")?j(I(e)):I(e),alt:E(e),className:"quest-sidebar__icon",style:{opacity:y===e?1:.5}})},e))})]}),a.jsxs("div",{className:"quest-sidebar__group",children:[a.jsx("span",{className:"quest-sidebar__label",children:"DLC"}),a.jsx("div",{className:"quest-sidebar__track quest-sidebar__track--expansions",children:x.map(e=>{const d=e===s.BaseGame,h=()=>{if(d){const u=x.filter(o=>o!==s.BaseGame);u.every(o=>q.includes(o))?u.forEach(o=>N(o)):u.forEach(o=>{q.includes(o)||N(o)})}else N(e)};return a.jsx("button",{className:`quest-sidebar__item ${q.includes(e)?"quest-sidebar__item--active":""}`,onClick:h,title:d?"Toggle All DLCs":e.replace("-"," ").toUpperCase(),children:W[e]?a.jsx("img",{src:j(W[e]),alt:e,className:"quest-sidebar__icon",style:{borderRadius:"4px"}}):a.jsx("span",{style:{fontSize:"10px",color:"white"},children:e.substring(0,2).toUpperCase()})},e)})})]}),a.jsxs("div",{className:"quest-sidebar__group",children:[a.jsx("span",{className:"quest-sidebar__label",children:"Filter"}),a.jsx("div",{className:"quest-sidebar__track quest-sidebar__track--elements",children:k.map(e=>{const d=e==="all",h=k.filter(f=>f!=="all"),u=h.every(f=>b.includes(f)),_=d?u:b.includes(e),o=()=>{if(d){if(u)return;h.forEach(f=>{b.includes(f)||C(f)})}else{if(b.includes(e)&&b.length===1)return;C(e)}};return a.jsx("button",{className:`quest-sidebar__item ${_?"quest-sidebar__item--active":""}`,onClick:o,title:e.toUpperCase(),children:T[e]&&a.jsx("img",{src:j(T[e]),alt:e,className:"quest-sidebar__icon",style:{opacity:_?1:.5}})},e)})})]})]})]})}export{Y as Q};
//# sourceMappingURL=QuestSidebar-D5mCGK6w.js.map
